<!DOCTYPE html>
<html lang="id">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Undercover e arek arek dewe</title>
    <style>
        :root {
            --primary-dark: #1a0d2a;
            --primary-purple: #3d235a;
            --accent-purple: #6a4c93;
            --gold: #ffd700;
            --gold-glow: rgba(255, 215, 0, 0.5);
            --text-light: #e6d4ff;
        }
        
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            font-family: 'Cinzel Decorative', cursive;
        }
        
        body {
            background: linear-gradient(135deg, var(--primary-dark), #0a0415);
            color: var(--text-light);
            min-height: 100vh;
            display: flex;
            flex-direction: column;
            align-items: center;
            padding: 20px;
            overflow-x: hidden;
        }
        
        .container {
            max-width: 800px;
            width: 100%;
            text-align: center;
        }
        
        h1 {
            font-size: 3rem;
            margin: 20px 0;
            text-shadow: 0 0 10px var(--gold-glow);
            color: var(--gold);
            letter-spacing: 3px;
        }
        
        .subtitle {
            font-size: 1.2rem;
            margin-bottom: 30px;
            opacity: 0.8;
        }
        
        .setup-section, .game-section, .name-input-section {
            background: rgba(29, 15, 50, 0.7);
            border: 2px solid var(--accent-purple);
            border-radius: 15px;
            padding: 25px;
            margin-bottom: 30px;
            box-shadow: 0 0 20px rgba(106, 76, 147, 0.3);
            backdrop-filter: blur(5px);
        }
        
        .role-counts {
            display: flex;
            justify-content: space-around;
            margin: 20px 0;
            flex-wrap: wrap;
        }
        
        .role-input {
            margin: 10px;
        }
        
        label {
            display: block;
            margin-bottom: 5px;
            font-size: 1.1rem;
        }
        
        input {
            background: var(--primary-purple);
            border: 1px solid var(--accent-purple);
            border-radius: 5px;
            color: var(--text-light);
            padding: 8px 12px;
            font-size: 1rem;
            width: 80px;
            text-align: center;
        }
        
        .name-inputs {
            display: flex;
            flex-direction: column;
            align-items: center;
            margin: 20px 0;
        }
        
        .name-input {
            margin: 8px 0;
            width: 100%;
            max-width: 300px;
        }
        
        .name-input input {
            width: 100%;
            max-width: 300px;
        }
        
        button {
            background: linear-gradient(to bottom, var(--accent-purple), var(--primary-purple));
            border: 1px solid var(--gold);
            border-radius: 8px;
            color: var(--gold);
            padding: 12px 25px;
            font-size: 1.1rem;
            cursor: pointer;
            margin: 10px;
            transition: all 0.3s;
            text-shadow: 0 0 5px var(--gold-glow);
            box-shadow: 0 0 10px rgba(255, 215, 0, 0.3);
        }
        
        button:hover {
            transform: translateY(-2px);
            box-shadow: 0 0 15px var(--gold-glow);
        }
        
        button:disabled {
            opacity: 0.5;
            cursor: not-allowed;
            transform: none;
            box-shadow: none;
        }
        
        .cards-container {
            display: flex;
            flex-wrap: wrap;
            justify-content: center;
            gap: 20px;
            margin-top: 20px;
        }
        
        .card {
            width: 150px;
            height: 200px;
            perspective: 1000px;
            cursor: pointer;
        }
        
        .card.disabled {
            cursor: default;
        }
        
        .card-inner {
            position: relative;
            width: 100%;
            height: 100%;
            text-align: center;
            transition: transform 0.6s;
            transform-style: preserve-3d;
        }
        
        .card.flipped .card-inner {
            transform: rotateY(180deg);
        }
        
        .card-front, .card-back {
            position: absolute;
            width: 100%;
            height: 100%;
            backface-visibility: hidden;
            border-radius: 10px;
            display: flex;
            flex-direction: column;
            justify-content: center;
            align-items: center;
            padding: 15px;
            box-shadow: 0 4px 8px rgba(0, 0, 0, 0.3);
        }
        
        .card-front {
            background: linear-gradient(135deg, var(--primary-purple), #2a1845);
            border: 2px solid var(--gold);
            color: var(--gold);
        }
        
        .card-back {
            background: linear-gradient(135deg, #2a1845, var(--primary-dark));
            border: 2px solid var(--accent-purple);
            transform: rotateY(180deg);
        }
        
        .role-icon {
            font-size: 3rem;
            margin-bottom: 10px;
        }
        
        .role-name {
            font-size: 1.2rem;
            font-weight: bold;
        }
        
        .player-name {
            font-size: 1.1rem;
            margin-top: 5px;
            color: var(--gold);
        }
        
        .role-desc {
            font-size: 0.9rem;
            margin-top: 10px;
            opacity: 0.8;
        }
        
        .mr-white {
            background: linear-gradient(135deg, #4a306d, #2a1845) !important;
            border: 2px solid var(--gold) !important;
            box-shadow: 0 0 15px var(--gold-glow) !important;
        }
        
        .undercover {
            background: linear-gradient(135deg, #5a3d7a, #3d235a) !important;
            border: 2px solid #b19cd9 !important;
            box-shadow: 0 0 10px rgba(177, 156, 217, 0.5) !important;
        }
        
        .civilian {
            background: linear-gradient(135deg, #3d235a, #2a1845) !important;
            border: 2px solid var(--accent-purple) !important;
        }
        
        .hidden {
            display: none;
        }
        
        .floating-elements {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            pointer-events: none;
            z-index: -1;
        }
        
        .floating-element {
            position: absolute;
            background: rgba(106, 76, 147, 0.1);
            border-radius: 50%;
            animation: float 15s infinite linear;
        }
        
        @keyframes float {
            0% {
                transform: translateY(0) rotate(0deg);
                opacity: 0;
            }
            10% {
                opacity: 0.3;
            }
            90% {
                opacity: 0.3;
            }
            100% {
                transform: translateY(-100vh) rotate(360deg);
                opacity: 0;
            }
        }
        
        .pulse {
            animation: pulse 2s infinite;
        }
        
        @keyframes pulse {
            0% {
                box-shadow: 0 0 0 0 rgba(255, 215, 0, 0.4);
            }
            70% {
                box-shadow: 0 0 0 10px rgba(255, 215, 0, 0);
            }
            100% {
                box-shadow: 0 0 0 0 rgba(255, 215, 0, 0);
            }
        }
        
        .instructions {
            background: rgba(0, 0, 0, 0.3);
            padding: 15px;
            border-radius: 10px;
            margin: 15px 0;
            font-size: 0.9rem;
        }
        
        @media (max-width: 600px) {
            h1 {
                font-size: 2rem;
            }
            
            .card {
                width: 130px;
                height: 180px;
            }
            
            .role-icon {
                font-size: 2.5rem;
            }
            
            .role-counts {
                flex-direction: column;
                align-items: center;
            }
            
            .setup-section, .game-section, .name-input-section {
                padding: 15px;
            }
        }
    </style>
    <link href="https://fonts.googleapis.com/css2?family=Cinzel+Decorative:wght@400;700;900&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
</head>
<body>
    <div class="floating-elements" id="floatingElements"></div>
    
    <div class="container">
        <h1>UNDERCOVER</h1>
        <p class="subtitle">Game anti tikus berdasi</p>
        
        <div class="setup-section" id="setupSection">
            <h2>Atur Permainan</h2>
            <p>Sopo ae seng main</p>
            
            <div class="role-counts">
                <div class="role-input">
                    <label for="totalPlayers">Total Pemain</label>
                    <input type="number" id="totalPlayers" min="4" max="20" value="8">
                </div>
                <div class="role-input">
                    <label for="mrWhiteCount">Mr. White</label>
                    <input type="number" id="mrWhiteCount" min="1" max="5" value="1">
                </div>
                <div class="role-input">
                    <label for="undercoverCount">Undercover</label>
                    <input type="number" id="undercoverCount" min="1" max="5" value="2">
                </div>
            </div>
            
            <button id="setPlayerNames">Jenengmu</button>
        </div>
        
        <div class="name-input-section hidden" id="nameInputSection">
            <h2>Jenengmu</h2>
            <p>Nama per pemain</p>
            
            <div class="name-inputs" id="nameInputs">
                <!-- Input nama akan di-generate oleh JavaScript -->
            </div>
            
            <div class="instructions">
                <p><strong>Petunjuk:</stong>Setelah di tutup gabisa di lihat lagi.</p>
            </div>
            
            <button id="startGame" class="pulse">Mulai Permainan</button>
            <button id="backToSetup">Kembali ke Pengaturan</button>
        </div>
        
        <div class="game-section hidden" id="gameSection">
            <h2>Kartu Peran</h2>
            <p>Klik pada kartu untuk melihat peran masing-masing pemain</p>
            <p><em>Setelah kartu ditutup, tidak dapat dibuka lagi!</em></p>
            
            <div class="cards-container" id="cardsContainer">
                <!-- Kartu akan di-generate oleh JavaScript -->
            </div>
            
            <button id="resetGame">Ulangi Permainan</button>
        </div>
    </div>

    <script>
        // Elemen DOM
        const setupSection = document.getElementById('setupSection');
        const nameInputSection = document.getElementById('nameInputSection');
        const gameSection = document.getElementById('gameSection');
        const nameInputsContainer = document.getElementById('nameInputs');
        const cardsContainer = document.getElementById('cardsContainer');
        const setPlayerNamesBtn = document.getElementById('setPlayerNames');
        const startGameBtn = document.getElementById('startGame');
        const backToSetupBtn = document.getElementById('backToSetup');
        const resetGameBtn = document.getElementById('resetGame');
        const totalPlayersInput = document.getElementById('totalPlayers');
        const mrWhiteCountInput = document.getElementById('mrWhiteCount');
        const undercoverCountInput = document.getElementById('undercoverCount');
        const floatingElements = document.getElementById('floatingElements');
        
        // Data pemain
        let players = [];
        
        // Buat elemen floating untuk efek visual
        function createFloatingElements() {
            for (let i = 0; i < 15; i++) {
                const element = document.createElement('div');
                element.classList.add('floating-element');
                
                // Random size dan position
                const size = Math.random() * 100 + 20;
                element.style.width = `${size}px`;
                element.style.height = `${size}px`;
                element.style.left = `${Math.random() * 100}%`;
                element.style.animationDelay = `${Math.random() * 15}s`;
                
                floatingElements.appendChild(element);
            }
        }
        
        // Validasi input
        function validateInputs() {
            const totalPlayers = parseInt(totalPlayersInput.value);
            const mrWhiteCount = parseInt(mrWhiteCountInput.value);
            const undercoverCount = parseInt(undercoverCountInput.value);
            
            // Pastikan jumlah peran tidak melebihi total pemain
            if (mrWhiteCount + undercoverCount >= totalPlayers) {
                alert('Jumlah Mr. White dan Undercover tidak boleh sama dengan atau lebih dari total pemain!');
                return false;
            }
            
            // Batasan minimal dan maksimal
            if (totalPlayers < 4 || totalPlayers > 20) {
                alert('Total pemain harus antara 4 dan 20!');
                return false;
            }
            
            if (mrWhiteCount < 1 || mrWhiteCount > 5) {
                alert('Jumlah Mr. White harus antara 1 dan 5!');
                return false;
            }
            
            if (undercoverCount < 1 || undercoverCount > 5) {
                alert('Jumlah Undercover harus antara 1 dan 5!');
                return false;
            }
            
            return true;
        }
        
        // Generate input nama
        function generateNameInputs() {
            const totalPlayers = parseInt(totalPlayersInput.value);
            nameInputsContainer.innerHTML = '';
            
            for (let i = 0; i < totalPlayers; i++) {
                const nameInputDiv = document.createElement('div');
                nameInputDiv.classList.add('name-input');
                nameInputDiv.innerHTML = `
                    <label for="playerName${i}">Nama Pemain ${i + 1}</label>
                    <input type="text" id="playerName${i}" placeholder="Masukkan nama" required>
                `;
                nameInputsContainer.appendChild(nameInputDiv);
            }
        }
        
        // Validasi nama pemain
        function validatePlayerNames() {
            const totalPlayers = parseInt(totalPlayersInput.value);
            
            for (let i = 0; i < totalPlayers; i++) {
                const nameInput = document.getElementById(`playerName${i}`);
                if (!nameInput.value.trim()) {
                    alert(`Nama untuk Pemain ${i + 1} harus diisi!`);
                    nameInput.focus();
                    return false;
                }
            }
            
            return true;
        }
        
        // Simpan nama pemain
        function savePlayerNames() {
            const totalPlayers = parseInt(totalPlayersInput.value);
            players = [];
            
            for (let i = 0; i < totalPlayers; i++) {
                const nameInput = document.getElementById(`playerName${i}`);
                players.push({
                    id: i,
                    name: nameInput.value.trim() || `Pemain ${i + 1}`,
                    role: null,
                    revealed: false
                });
            }
        }
        
        // Generate kartu peran
        function generateRoleCards() {
            const mrWhiteCount = parseInt(mrWhiteCountInput.value);
            const undercoverCount = parseInt(undercoverCountInput.value);
            const civilianCount = players.length - mrWhiteCount - undercoverCount;
            
            // Buat array peran
            const roles = [];
            
            // Tambahkan Mr. White
            for (let i = 0; i < mrWhiteCount; i++) {
                roles.push('mr-white');
            }
            
            // Tambahkan Undercover
            for (let i = 0; i < undercoverCount; i++) {
                roles.push('undercover');
            }
            
            // Tambahkan Civilian
            for (let i = 0; i < civilianCount; i++) {
                roles.push('civilian');
            }
            
            // Acak urutan peran
            shuffleArray(roles);
            
            // Assign peran ke pemain
            players.forEach((player, index) => {
                player.role = roles[index];
            });
            
            // Kosongkan container kartu
            cardsContainer.innerHTML = '';
            
            // Buat kartu untuk setiap pemain
            players.forEach((player, index) => {
                const card = document.createElement('div');
                card.classList.add('card');
                card.dataset.playerId = player.id;
                card.innerHTML = `
                    <div class="card-inner">
                        <div class="card-front">
                            <div class="role-icon">?</div>
                            <div class="player-name">${player.name}</div>
                            <div class="role-desc">Klik untuk melihat peran</div>
                        </div>
                        <div class="card-back ${player.role}">
                            <div class="role-icon">${getRoleIcon(player.role)}</div>
                            <div class="role-name">${getRoleName(player.role)}</div>
                            <div class="player-name">${player.name}</div>
                            <div class="role-desc">${getRoleDescription(player.role)}</div>
                        </div>
                    </div>
                `;
                
                card.addEventListener('click', () => {
                    if (!card.classList.contains('flipped') && !player.revealed) {
                        card.classList.add('flipped');
                        player.revealed = true;
                        
                        // Set timeout untuk menonaktifkan kartu setelah beberapa detik
                        setTimeout(() => {
                            card.classList.add('disabled');
                        }, 2000);
                    }
                });
                
                cardsContainer.appendChild(card);
            });
        }
        
        // Fungsi untuk mengacak array
        function shuffleArray(array) {
            for (let i = array.length - 1; i > 0; i--) {
                const j = Math.floor(Math.random() * (i + 1));
                [array[i], array[j]] = [array[j], array[i]];
            }
            return array;
        }
        
        // Dapatkan ikon berdasarkan peran
        function getRoleIcon(role) {
            switch(role) {
                case 'mr-white': return '👤';
                case 'undercover': return '🕵️';
                case 'civilian': return '👥';
                default: return '?';
            }
        }
        
        // Dapatkan nama peran
        function getRoleName(role) {
            switch(role) {
                case 'mr-white': return 'Mr. White';
                case 'undercover': return 'Undercover';
                case 'civilian': return 'Civilian';
                default: return 'Unknown';
            }
        }
        
        // Dapatkan deskripsi peran
        function getRoleDescription(role) {
            switch(role) {
                case 'mr-white': return 'Tidak tahu kata rahasia. Tugasnya menebak kata yang dimainkan.';
                case 'undercover': return 'Tahu kata yang berbeda. Tugasnya menyamar sebagai civilian.';
                case 'civilian': return 'Tahu kata rahasia. Tugasnya menemukan undercover.';
                default: return '';
            }
        }
        
        // Event listeners
        setPlayerNamesBtn.addEventListener('click', () => {
            if (validateInputs()) {
                setupSection.classList.add('hidden');
                nameInputSection.classList.remove('hidden');
                generateNameInputs();
            }
        });
        
        startGameBtn.addEventListener('click', () => {
            if (validatePlayerNames()) {
                savePlayerNames();
                nameInputSection.classList.add('hidden');
                gameSection.classList.remove('hidden');
                generateRoleCards();
            }
        });
        
        backToSetupBtn.addEventListener('click', () => {
            nameInputSection.classList.add('hidden');
            setupSection.classList.remove('hidden');
        });
        
        resetGameBtn.addEventListener('click', () => {
            gameSection.classList.add('hidden');
            setupSection.classList.remove('hidden');
            players = [];
        });
        
        // Inisialisasi
        createFloatingElements();
    </script>
</body>
</html>
